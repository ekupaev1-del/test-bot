#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ Vercel —á–µ—Ä–µ–∑ CLI (–Ω–∞–¥–µ–∂–Ω–µ–µ —á–µ–º Deploy Hook)

echo "üöÄ –ó–∞–ø—É—Å–∫ –¥–µ–ø–ª–æ—è –Ω–∞ Vercel —á–µ—Ä–µ–∑ CLI..."
echo ""
echo "‚ö†Ô∏è  –≠—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Vercel"
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
if ! npx vercel whoami &>/dev/null; then
    echo "‚ùå –í—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –≤ Vercel"
    echo "   –í—ã–ø–æ–ª–Ω–∏—Ç–µ: npx vercel login"
    exit 1
fi

echo "‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞"
echo ""
echo "üì¶ –ù–∞—á–∏–Ω–∞–µ–º –¥–µ–ø–ª–æ–π..."
echo ""

# –î–µ–ø–ª–æ–∏–º –≤ production
npx vercel --prod --yes

if [ $? -eq 0 ]; then
    echo ""
    echo "‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!"
    echo "üîç –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à —Å–∞–π—Ç –Ω–∞ Vercel"
else
    echo ""
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ"
    exit 1
fi

